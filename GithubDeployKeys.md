# GitHub デプロイキーの作成と Rulesets のバイパス設定方法

このガイドでは、GitHub リポジトリにデプロイキーを作成する方法と、ブランチ保護ルールの Rulesets でデプロイキーをバイパスリストに追加する方法を説明します。

## デプロイキーの作成方法

デプロイキーは、特定のリポジトリにアクセスするための SSH キーです。以下の手順に従ってデプロイキーを作成し、リポジトリに設定します。

### 1. SSH キーを生成する

ターミナルを開き、次のコマンドで新しい SSH キーを生成します：

```sh
ssh-keygen -t rsa -b 4096 -N '' -f id_github -C "your_email@example.com"
```

- `-N ''` オプションでパスフレーズなしのキーを生成します。
- `-f id_github` でキーの保存先ファイル名を指定します。

### 2. 公開鍵をコピーして GitHub に追加する

1. 生成された公開鍵（`id_github.pub`）を手動でクリップボードにコピーします（Windows の場合、公開鍵ファイルを開いて内容をコピーしてください）。
2. GitHub で対象のリポジトリに移動します。
3. `Settings` > `Deploy keys` > `Add deploy key` をクリックします。
4. キーのタイトルを入力し、公開鍵をペーストします。
5. 「Allow write access」にチェックを入れると、リポジトリへの書き込み権限を与えることが可能です（通常は読み取りのみ）。
6. 「Add key」ボタンをクリックして保存します。

## Branch Rulesets のバイパス設定方法

GitHub では、ブランチ保護ルールの一部として「Rulesets」を設定し、特定のユーザーやキーに対してルールをバイパスすることができます。以下は、デプロイキーをバイパスリストに追加する方法です。

### 1. リポジトリの設定に移動

1. GitHub で対象のリポジトリを開きます。
2. 右上の `Settings` をクリックします。

### 2. Branch Rulesets の設定

1. 左のサイドメニューから `Rules` を選択します。
2. 「Rulesets」セクションに移動します。
3. 該当するルールセットをクリックして編集するか、新しいルールセットを追加します。

### 3. Bypass リストにデプロイキーを追加

1. 「Bypass list」セクションを探します。
2. 「Add bypass」ボタンをクリックし、「Deploy keys」を選択します。
3. デプロイキーがバイパスリストに追加され、「Always allow」と表示されていることを確認します。
4. 必要な設定を行った後、「Save changes」ボタンをクリックして設定を保存します。

## まとめ

1. **デプロイキーの作成**: パスフレーズなしで SSH キーを生成し、GitHub のリポジトリに追加します。
2. **Branch Rulesets のバイパス設定**: Rulesets を編集してデプロイキーをバイパスリストに追加します。

何か追加の質問があれば、遠慮なくお知らせください。

